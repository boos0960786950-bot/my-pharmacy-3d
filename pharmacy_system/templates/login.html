<!DOCTYPE html>
<html lang="ar" dir="ltr">

<head>
    <meta charset="UTF-8">
    <title>دخول احترافي - صيدلية المستقبل</title>
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@500;700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
    <style>
        :root {
            /* Palette with Gradients */
            --purple-grad: linear-gradient(135deg, #a55eea, #4b7bec);
            --orange-grad: linear-gradient(135deg, #fd9644, #fa8231);
            --black-grad: linear-gradient(135deg, #4b6584, #2d3436);
            --yellow-grad: linear-gradient(135deg, #f1c40f, #f39c12);
            --bg: #d1d8e0;
        }

        body {
            margin: 0;
            padding: 0;
            display: flex;
            height: 100vh;
            font-family: 'Tajawal', sans-serif;
            background: var(--bg);
            overflow: hidden;
            flex-direction: row-reverse;
            perspective: 1200px;
            /* Enhanced 3D depth */
        }

        /* --- Visual Stage --- */
        .visual-side {
            flex: 1.5;
            display: flex;
            align-items: center;
            justify-content: center;
            background: radial-gradient(circle at 50% 60%, #ffffff, #d1d8e0);
        }

        .stage {
            position: relative;
            width: 650px;
            height: 600px;
            transform-style: preserve-3d;
        }

        .char-container {
            position: absolute;
            bottom: 80px;
            transform-style: preserve-3d;
            /* Ensure smooth transforms */
            will-change: transform;
        }

        .char-body {
            position: relative;
            width: 100%;
            height: 100%;
            /* High Quality Shadows */
            box-shadow:
                inset 5px 5px 15px rgba(255, 255, 255, 0.3),
                /* Light Highlight */
                inset -5px -5px 15px rgba(0, 0, 0, 0.1),
                /* Inner Shadow */
                10px 15px 30px rgba(0, 0, 0, 0.2);
            /* Drop Shadow */
        }

        /* --- 1. Purple (Main Spy) --- */
        /* Moved slightly Left to avoid hitting Black when leaning */
        .c-purple {
            width: 150px;
            height: 290px;
            left: 160px;
            z-index: 10;
        }

        .c-purple .char-body {
            background: var(--purple-grad);
            border-radius: 15px;
        }

        .c-purple .mouth {
            width: 8px;
            height: 25px;
            background: #2f3640;
            position: absolute;
            top: 130px;
            left: 50%;
            transform: translateX(-50%);
            border-radius: 10px;
        }

        /* Hands */
        .hand {
            width: 35px;
            height: 100px;
            background: #3867d6;
            /* Darker Purple */
            position: absolute;
            top: 110px;
            border-radius: 20px;
            transform-origin: top center;
            opacity: 0;
            box-shadow: 5px 5px 15px rgba(0, 0, 0, 0.2);
        }

        .hand-l {
            left: -15px;
            transform: rotate(15deg);
        }

        .hand-r {
            right: -15px;
            transform: rotate(-15deg);
        }

        /* --- 2. Black (Background Guard) --- */
        /* Moved further Right and Back */
        .c-black {
            width: 130px;
            height: 220px;
            left: 300px;
            bottom: 80px;
            z-index: 5;
        }

        .c-black .char-body {
            background: var(--black-grad);
            border-radius: 12px;
        }

        /* --- 3. Yellow (Observers) --- */
        /* Far Right */
        .c-yellow {
            width: 110px;
            height: 250px;
            left: 420px;
            bottom: 80px;
            z-index: 8;
        }

        .c-yellow .char-body {
            background: var(--yellow-grad);
            border-radius: 55px 55px 15px 15px;
        }

        .c-yellow .mouth {
            width: 40px;
            height: 6px;
            background: #2f3640;
            position: absolute;
            top: 120px;
            left: 60%;
            border-radius: 10px;
        }

        /* --- 4. Orange (Happy Dome) --- */
        /* Far Left */
        .c-orange {
            width: 180px;
            height: 130px;
            left: 0px;
            bottom: 60px;
            z-index: 9;
        }

        .c-orange .char-body {
            background: var(--orange-grad);
            border-radius: 100px 100px 15px 15px;
        }

        .c-orange .mouth {
            width: 40px;
            height: 20px;
            background: #2f3640;
            position: absolute;
            top: 70px;
            left: 50%;
            transform: translateX(-50%);
            border-radius: 0 0 20px 20px;
        }

        /* --- Eyes System --- */
        .eyes-row {
            position: absolute;
            width: 100%;
            display: flex;
            justify-content: center;
            top: 60px;
            pointer-events: none;
        }

        .c-purple .eyes-row {
            gap: 40px;
            top: 70px;
        }

        .c-black .eyes-row {
            gap: 20px;
            justify-content: flex-start;
            padding-left: 20px;
            top: 60px;
        }

        .c-yellow .eyes-row {
            justify-content: flex-start;
            padding-left: 25px;
            top: 60px;
        }

        .c-orange .eyes-row {
            gap: 60px;
            top: 45px;
        }

        .eye-socket {
            width: 24px;
            height: 24px;
            background: white;
            border-radius: 50%;
            position: relative;
            overflow: hidden;
            box-shadow: inset 1px 1px 3px rgba(0, 0, 0, 0.2);
        }

        .pupil {
            width: 10px;
            height: 10px;
            background: #2f3640;
            border-radius: 50%;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
        }

        /* Eyelids for Blinking */
        .eyelid {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 0%;
            background: #2f3640;
            opacity: 0.8;
            transition: height 0.1s;
            z-index: 10;
        }

        /* --- Form Side --- */
        .form-side {
            width: 450px;
            background: rgba(255, 255, 255, 0.9);
            display: flex;
            flex-direction: column;
            justify-content: center;
            padding: 60px;
            text-align: right;
            direction: rtl;
            box-shadow: 20px 0 60px rgba(0, 0, 0, 0.05);
            backdrop-filter: blur(20px);
            z-index: 20;
        }

        h2 {
            font-weight: 800;
            font-size: 2.2rem;
            margin-bottom: 5px;
            color: #4b6584;
        }

        p {
            color: #778ca3;
            margin-bottom: 30px;
        }

        input {
            width: 100%;
            padding: 18px;
            border: 2px solid #d1d8e0;
            border-radius: 12px;
            font-size: 1rem;
            outline: none;
            transition: 0.3s;
            margin-bottom: 20px;
            background: #f1f2f6;
        }

        input:focus {
            border-color: #4b7bec;
            background: white;
            box-shadow: 0 4px 12px rgba(75, 123, 236, 0.1);
        }

        .btn-login {
            background: var(--purple-grad);
            color: white;
            border: none;
            padding: 18px;
            border-radius: 12px;
            font-weight: 700;
            cursor: pointer;
            width: 100%;
            font-size: 1.1rem;
            box-shadow: 0 8px 20px rgba(75, 123, 236, 0.3);
            transition: 0.3s;
            margin-top: 10px;
        }

        .btn-login:hover {
            transform: translateY(-2px);
            box-shadow: 0 12px 25px rgba(75, 123, 236, 0.4);
        }

        .input-group {
            position: relative;
        }

        .peek-btn {
            position: absolute;
            left: 15px;
            top: 22px;
            cursor: pointer;
            color: #a5b1c2;
            font-size: 1.2rem;
        }
    </style>
</head>

<body>

    <div class="visual-side">
        <div class="stage" id="stage">

            <!-- 1. Purple -->
            <div class="char-container c-purple">
                <div class="char-body">
                    <div class="eyes-row">
                        <div class="eye-socket">
                            <div class="pupil"></div>
                            <div class="eyelid"></div>
                        </div>
                        <div class="eye-socket">
                            <div class="pupil"></div>
                            <div class="eyelid"></div>
                        </div>
                    </div>
                    <div class="mouth"></div>
                    <div class="hand hand-l"></div>
                    <div class="hand hand-r"></div>
                </div>
            </div>

            <!-- 2. Black -->
            <div class="char-container c-black">
                <div class="char-body">
                    <div class="eyes-row">
                        <div class="eye-socket">
                            <div class="pupil"></div>
                            <div class="eyelid"></div>
                        </div>
                        <div class="eye-socket">
                            <div class="pupil"></div>
                            <div class="eyelid"></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 3. Yellow -->
            <div class="char-container c-yellow">
                <div class="char-body">
                    <div class="eyes-row">
                        <!-- One eye for Yellow maybe? Or two side by side -->
                        <div class="eye-socket">
                            <div class="pupil"></div>
                            <div class="eyelid"></div>
                        </div>
                    </div>
                    <div class="mouth"></div>
                </div>
            </div>

            <!-- 4. Orange -->
            <div class="char-container c-orange">
                <div class="char-body">
                    <div class="eyes-row">
                        <div class="eye-socket">
                            <div class="pupil"></div>
                            <div class="eyelid"></div>
                        </div>
                        <div class="eye-socket">
                            <div class="pupil"></div>
                            <div class="eyelid"></div>
                        </div>
                    </div>
                    <div class="mouth"></div>
                </div>
            </div>

        </div>
    </div>

    <div class="form-side">
        <h2>أهلاً بك مجدداً</h2>
        <p>قم بتسجيل الدخول للوصول للوحة التحكم</p>

        <form method="POST">
            <div class="input-group">
                <input type="text" name="username" placeholder="اسم المستخدم أو البريد" required autocomplete="off">
            </div>
            <div class="input-group">
                <input type="password" name="password" placeholder="كلمة المرور" required>
                <i class="bi bi-eye-slash-fill peek-btn" id="peek-toggle"></i>
            </div>
            <button type="submit" class="btn-login">تسجيل دخول</button>
        </form>
    </div>

    <!-- GSAP -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>

    <script>
        const stage = document.getElementById('stage');
        const charBodies = document.querySelectorAll('.char-body');
        const lips = document.querySelectorAll('.eyelid');
        const pupils = document.querySelectorAll('.pupil');

        const usernameInput = document.querySelector('input[name="username"]');
        const passInput = document.querySelector('input[name="password"]');
        const peekBtn = document.getElementById('peek-toggle');
        const loginForm = document.querySelector('form');

        // References
        const purple = document.querySelector('.c-purple .char-body');
        const black = document.querySelector('.c-black .char-body');
        const yellow = document.querySelector('.c-yellow .char-body');
        const orange = document.querySelector('.c-orange .char-body');

        const mouthPurple = document.querySelector('.c-purple .mouth');
        const mouthYellow = document.querySelector('.c-yellow .mouth');

        let state = 'idle';

        // --- 1. INTRO (Clean & Energetic) ---
        const tl = gsap.timeline();
        tl.from(purple.parentElement, { y: -800, duration: 1.2, ease: "elastic.out(1, 0.4)" })
            .from(black.parentElement, { y: -800, duration: 1.1, ease: "power2.out" }, "-=0.9")
            .from(yellow.parentElement, { y: 600, duration: 0.8, ease: "back.out(2)" }, "-=0.8")
            .from(orange.parentElement, { scale: 0, duration: 0.6, ease: "back.out(3)" }, "-=0.6");

        // --- 2. IDLE (Organic Breathing + Blinking) ---
        // Random breathing start so they aren't synced
        charBodies.forEach(char => {
            gsap.to(char, {
                scaleY: 1.03, scaleX: 0.97,
                transformOrigin: "bottom center",
                duration: 1.2 + Math.random(), // Random duration
                repeat: -1, yoyo: true,
                ease: "sine.inOut",
                delay: Math.random() // Random start
            });
        });

        // Blinking System
        function blink() {
            if (state === 'shocked') return; // Don't blink if shocked

            // Randomly pick a set of eyes or all
            gsap.to(lips, {
                height: "100%", duration: 0.1, yoyo: true, repeat: 1,
                stagger: { amount: 0.1, from: "random" },
                onComplete: () => {
                    setTimeout(blink, Math.random() * 3000 + 2000); // Random interval 2-5s
                }
            });
        }
        setTimeout(blink, 2000);


        // --- 3. MOUSE TRACKING (Smoothed) ---
        document.addEventListener('mousemove', (e) => {
            if (state === 'shocked') return;

            const xNorm = (e.clientX - window.innerWidth / 2) / (window.innerWidth / 2);
            const yNorm = (e.clientY - window.innerHeight / 2) / (window.innerHeight / 2);

            // Stage Parallax
            gsap.to(stage, {
                rotationY: -xNorm * 10,
                rotationX: yNorm * 10,
                duration: 1.5, ease: "power2.out"
            });

            // Smooth Eye Tracking
            pupils.forEach(pupil => {
                // Calculate target position
                const rect = pupil.parentElement.getBoundingClientRect();
                const dx = (e.clientX - (rect.left + rect.width / 2)) / 10;
                const dy = (e.clientY - (rect.top + rect.height / 2)) / 10;

                // Clamp
                const tx = Math.max(-5, Math.min(5, dx));
                const ty = Math.max(-5, Math.min(5, dy));

                gsap.to(pupil, { x: tx, y: ty, duration: 0.4, ease: "power2.out" });
            });
        });

        // --- 4. INTERACTIONS ---

        // EMAIL -> SPY
        usernameInput.addEventListener('focus', () => {
            state = 'spying';

            // Purple Lean (careful not to overlap Black)
            gsap.to(purple, { rotation: 8, x: 25, skewX: -3, duration: 0.6, ease: "back.out(1.5)" });

            // Black Peek (Move Left)
            gsap.to(black, { x: -40, rotation: -5, duration: 0.5 });

            // Yellow Stretch
            gsap.to(yellow, { scaleY: 1.15, duration: 0.5 });

            // Orange Shift
            gsap.to(orange, { x: 15, duration: 0.5 });
        });

        usernameInput.addEventListener('blur', () => {
            if (document.activeElement !== passInput) resetAll();
        });


        // PASSWORD -> NERVOUS
        passInput.addEventListener('focus', () => {
            state = 'nervous';

            // Purple Shake
            gsap.to(purple, { x: "random(-2, 2)", duration: 0.05, repeat: -1, yoyo: true });

            // Purple Mouth Worry
            gsap.to(mouthPurple, { height: 6, width: 25, borderRadius: 5, duration: 0.3 });

            // Black Hide
            gsap.to(black, { y: 30, x: 0, duration: 0.5 });

            // Yellow Worry
            gsap.to(mouthYellow, { height: 12, borderRadius: "50%", duration: 0.3 });

            // Orange Squash
            gsap.to(orange, { scaleY: 0.7, scaleX: 1.1, duration: 0.5 });
        });

        passInput.addEventListener('blur', () => {
            if (state !== 'shocked') resetAll();
        });


        // SHOW PASS -> SHOCK
        peekBtn.addEventListener('click', () => {
            const type = passInput.type === 'password' ? 'text' : 'password';
            passInput.type = type;
            peekBtn.classList.toggle('bi-eye-slash-fill');
            peekBtn.classList.toggle('bi-eye-fill');

            if (type === 'text') {
                state = 'shocked';

                // Purple Shock
                gsap.killTweensOf(purple);
                gsap.to(purple, { scale: 1.1, x: 0, rotation: 0, duration: 0.1 });
                gsap.to(purple, { x: "random(-5, 5)", duration: 0.03, repeat: 10, yoyo: true }); // Violent shake
                gsap.to(mouthPurple, { height: 40, width: 25, borderRadius: 20, duration: 0.2 });

                // Yellow JAW DROP
                gsap.to(mouthYellow, { height: 70, width: 35, borderRadius: 15, duration: 0.3, ease: "elastic.out(1, 0.3)" });
                gsap.to(yellow, { scaleY: 1.1, duration: 0.2 });

                // Orange Jump
                gsap.to(orange, { y: -80, scaleY: 1.2, duration: 0.3, yoyo: true, repeat: 1 });

                // Black Shy
                gsap.to(black, { rotationY: 180, duration: 0.4 }); // Turn around?

            } else {
                state = 'nervous';
                passInput.focus();
                // Reset Shock features
                gsap.to(mouthPurple, { height: 6, width: 25, borderRadius: 5, duration: 0.3 });
                gsap.to(mouthYellow, { height: 12, borderRadius: "50%", duration: 0.3 });
                gsap.to(black, { rotationY: 0, duration: 0.3 });
            }
        });

        function resetAll() {
            state = 'idle';
            gsap.killTweensOf([purple, black, yellow, orange]);

            // Reset Positions
            gsap.to([purple, black, yellow, orange], {
                x: 0, y: 0, rotation: 0, skewX: 0, scale: 1, rotationY: 0,
                duration: 0.6, ease: "power2.out"
            });

            // Reset Mouths
            gsap.to([mouthPurple, mouthYellow], {
                width: "", height: "", borderRadius: "", duration: 0.4
            });

            // Re-trigger breathing
            charBodies.forEach(char => {
                gsap.to(char, {
                    scaleY: 1.03, scaleX: 0.97, transformOrigin: "bottom center",
                    duration: 1.2 + Math.random(), repeat: -1, yoyo: true,
                    ease: "sine.inOut", delay: 0.5
                });
            });
        }

        // --- 5. LOGIN JUMP ---
        loginForm.addEventListener('submit', (e) => {
            e.preventDefault();
            resetAll();
            const tl = gsap.timeline({ onComplete: () => loginForm.submit() });
            tl.to(charBodies, { scaleY: 0.6, y: 30, duration: 0.2 })
                .to(charBodies, { scaleY: 1.1, y: -150, duration: 0.6, ease: "power2.out", stagger: 0.05 });
        });

    </script>
</body>

</html>